@functions{
    public string GetAntiForgeryToken()
    {
        string cookieToken, formToken;
        AntiForgery.GetTokens(null, out cookieToken, out formToken);
        return cookieToken + ":" + formToken;
    }
}

<p class="error" data-bind="text: error"></p>
<input id="antiForgeryToken" type="hidden" value="@GetAntiForgeryToken()" />

<div id="expensesWrap">
    <section>
        <div id="expenseReportsList" data-bind="visible: expenseReports().length > 0">
            <table>
                <tbody data-bind="foreach: expenseReports">
                    <tr data-bind="click: $parent.getReport, attr: { expenseReportId: expenseReportId }" style="cursor: pointer">
                        <td data-bind="text: name"></td>
                    </tr>
                </tbody>
            </table>
        </div>

    </section>

    <section>
        <div id="expensesList" data-bind="with: selectedReport">
            <div data-bind="fadeSwitcher: reportVisible">
                <table id="expensesTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Description</th>
                            <th>Amount</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: expenses()">
                        <tr data-bind="click: $parent.getExpenseImage" style="cursor: pointer">
                            <td data-bind="text: displayDate"></td>
                            <td data-bind="text: description"></td>
                            <td data-bind="text: baseAmount"></td>
                        </tr>

                    </tbody>
                </table>
                <form data-bind="submit: addExpense">
                    <input class="addExpense" type="text" data-bind="value: selectedExpense.name, placeholder: 'Type here to add', blurOnEnter: true, event: { blur: addExpense }" />
                </form>

                <p>Grand Total: <span data-bind='text: baseTotal()'></span></p>
            </div>
            <div data-bind="with: selectedExpense">
                <div id="expenseDetails">
                    <a href="#" data-bind="click: $parent.done">Done</a>


                    <div>
                        <label for="expenseDate">Date:</label>
                        <input id="expenseDate" type="text" data-bind="datepicker: date, datepickerOptions: { dateFormat: 'DD, d MM, yy' }, blurOnEnter: true, event: { blur: $parent.addExpense }" />
                    </div>

                    <div>
                        <label>Description:</label>
                        @*<input type="text" data-bind="value: description, placeholder: 'Type Expense Name', blurOnEnter: true, event: { blur: $parent.addExpense }" />*@
                        <input type="text" data-bind="value: description, placeholder: 'Type Expense Name', blurOnEnter: true" />
                    </div>

                    <div>
                        <label>Currency</label>
                        <select data-bind="options: $root.currencies, optionsText: 'code', optionsValue: 'currencyId', value: currencyId"></select>
                    </div>
                    <div>
                        <label>Amount</label>
                        <input type="text" data-bind="value: amount, blurOnEnter: true" />
                    </div>

                    <div>
                        <label>Type</label>
                        <select data-bind="options: $root.expenseTypes, optionsText: 'code', optionsValue: 'expenseTypeId', value: typeId"></select>

                    </div>
                    <div>
                        <img data-bind="img: { src: imageSrc, busy: '/Images/busy.gif', fallback: '/Images/question.gif' }, blurOnEnter: true" alt="Expense image" />
                        
                       <form name="imageForm" id="imageForm" method="post" enctype="multipart/form-data" action="api/ExpenseImage">
                            <input type="file" accept="image/*" name="expenseImage" />
                            <input type="submit" value="Upload" />
                        </form>
                        
                        <p class="error" data-bind="visible: errorMessage, text: errorMessage"></p>

                    </div>
                </div>
            </div>
</section>
    </div>